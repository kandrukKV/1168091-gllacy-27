var modalFeedback=document.querySelector('.modal-feedback');var form=modalFeedback.querySelector('form');var userNameField=document.querySelector('#user-name');var emailField=document.querySelector('#user-email');var messageField=document.querySelector('#mess');var mailingBtn=document.querySelector('.map-descr .btn');var mdalCloseBtn=document.querySelector('.modal-close');var malingForm=document.querySelector('.mailing form');var malingEmail=document.querySelector('#mailing');var userName='';var email='';var isStoreSupport=!0;try{userName=localStorage.getItem('userName');email=localStorage.getItem('email')}catch{isStoreSupport=!1}
malingForm.addEventListener('submit',function(evt){if(!malingEmail.value){evt.preventDefault();console.log('Не заполнено поле email')}})
mailingBtn.addEventListener('click',function(evt){evt.preventDefault();modalFeedback.classList.add('modal-feedback--show');if(userName){userNameField.value=userName;if(!email){emailField.focus()}else{messageField.focus()}}else{userNameField.focus()};if(email){emailField.value=email}});mdalCloseBtn.addEventListener('click',function(evt){evt.preventDefault();modalFeedback.classList.remove('modal-feedback--show');modalFeedback.classList.remove('modal-feedback--error')})
window.addEventListener('keydown',function(evt){if(evt.keyCode===27){evt.preventDefault();if(modalFeedback.classList.contains('modal-feedback--show')){modalFeedback.classList.remove('modal-feedback--show');modalFeedback.classList.remove('modal-feedback--error')}}})
form.addEventListener('submit',function(evt){if(!userNameField.value||!emailField.value||!messageField.value){evt.preventDefault();modalFeedback.classList.remove('modal-feedback--error');modalFeedback.offsetWidth=modalFeedback.offsetWidth;modalFeedback.classList.add('modal-feedback--error')}else{if(isStoreSupport){localStorage.setItem('userName',userNameField.value);localStorage.setItem('email',emailField.value)}}})
